<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blood Stock Ledger â€” Matrix Display & Print with Remove</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial,sans-serif; margin:15px; color:#333; font-size:14px; text-align:center;}
h1, h2 { color:#A52A2A; margin-bottom:8px; text-align:center;}
.summary-container {
Â  Â  margin: 0 auto 15px auto;
Â  Â  width: fit-content;
Â  Â  border: 2px solid #A52A2A;
Â  Â  padding: 8px;
Â  Â  display: flex;
Â  Â  flex-wrap: wrap;
Â  Â  justify-content: space-around;
Â  Â  background-color: #fcebeb;
Â  Â  border-radius: 5px;
}
.summary-item {
Â  Â  text-align: center;
Â  Â  font-size: 1em;
Â  Â  font-weight: bold;
Â  Â  padding: 5px 12px;
Â  Â  min-width: 58px;
}
#addBagForm {margin:0 auto 20px auto; display: flex; gap:10px; padding:15px; border:1px solid #A52A2A; border-radius:5px; background-color:#fffafa; align-items:flex-end; flex-wrap:wrap; justify-content:center;}
#addBagForm div{ display:flex; flex-direction:column; text-align:left;}
#addBagForm label{font-weight:bold; margin-bottom:4px;font-size:0.9em;}
#addBagForm input, #addBagForm select, #addBagForm button {padding:8px;font-size:1em;}
#addBagForm button{background-color:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;font-weight:bold;}
#exportButton {background-color:#007bff; color:white; border:none; padding:10px 20px; border-radius:4px; cursor:pointer; font-weight:bold; margin-bottom:15px;}
.matrix-thick-right { border-right: 3.1px double #700 !important; }
.matrix-thick-left { border-left: 3.1px double #700 !important; }
.group-header { background:#a52a2a; color:#fff; letter-spacing:2px; border-bottom:2px solid #600; font-size:1em; }
.sub-header { background:#e5b4b4; font-weight:bold; }
#screenMatrixTable { width:100%; border-collapse:collapse; margin-bottom:18px;}
#screenMatrixTable th, #screenMatrixTable td { border:1.2px solid #333; padding:3px 8px;text-align:center;}
.remove-btn-matrix { background:#f44336; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:0.89em; padding:2px 9px; margin-left:5px; }
@media print {
Â  Â  .remove-btn-matrix { display:none!important;}
}
#ledgerTable{ display:none;}
#printDateStock{ display:block; font-size:1em; font-weight:bold; color:#700; margin-bottom:8px; text-align:center;}
@media print {
Â  Â  @page { size:A4 landscape; margin:8mm;}
Â  Â  body{margin:0; font-size:10pt;text-align:left; background: white;}
Â  Â  #addBagForm,.delete-btn,#exportButton,#ledgerTable,h2{display:none!important;}
Â  Â  #screenMatrixTable{ display:table!important;width:100%;margin:0;table-layout:fixed;border-collapse:collapse;font-size:0.97em;}
Â  Â  #screenMatrixTable th, #screenMatrixTable td{border:1px solid #333;padding:2px 5px;text-align:center;}
Â  Â  #screenMatrixTable th.group-header{}
Â  Â  #screenMatrixTable th.sub-header{}
Â  Â  .matrix-thick-right { border-right: 3.8px double #700 !important;}
Â  Â  .matrix-thick-left { border-left: 3.8px double #700 !important;}
Â  Â  .summary-container{ display: flex !important; margin: 10px auto 14px auto; border:2px solid #a52a2a; background:#fcdfdf;}
Â  Â  .summary-item{font-size:1.08em;}
Â  Â  #printDateStock{ font-size:1em; font-weight:bold; color:#700; margin-bottom:6px; display:block; text-align:center;}
}
</style>
</head>
<body>
<h1>Dr.BAMH Blood Storage Centre Blood Stock Ledger ðŸ©¸</h1>
<span id="printDateStock"></span>
<div class="summary-container">
Â  Â  <div class="summary-item">Total: <span id="totalBagsCount">0</span></div>
Â  Â  <div class="summary-item">A+: <span id="countA_pos">0</span></div>
Â  Â  <div class="summary-item">B+: <span id="countB_pos">0</span></div>
Â  Â  <div class="summary-item">O+: <span id="countO_pos">0</span></div>
Â  Â  <div class="summary-item">AB+: <span id="countAB_pos">0</span></div>
Â  Â  <div class="summary-item">A-: <span id="countA_neg">0</span></div>
Â  Â  <div class="summary-item">B-: <span id="countB_neg">0</span></div>
Â  Â  <div class="summary-item">O-: <span id="countO_neg">0</span></div>
Â  Â  <div class="summary-item">AB-: <span id="countAB_neg">0</span></div>
</div>
<form id="addBagForm">
Â  Â  <div><label for="bagPrefix">Source</label>
Â  Â  Â  Â  <select id="bagPrefix" required><option value="C-">C-</option><option value="I-">I-</option></select></div>
Â  Â  <div><label for="bagNumber">Bag No.</label>
Â  Â  Â  Â  <input type="text" id="bagNumber" required></div>
Â  Â  <div><label for="bloodGroup">Blood Group</label>
Â  Â  Â  Â  <select id="bloodGroup" required>
Â  Â  Â  Â  Â  Â  <option value="A+">A+</option><option value="B+">B+</option><option value="AB+">AB+</option>
Â  Â  Â  Â  Â  Â  <option value="O+">O+</option><option value="A-">A-</option><option value="B-">B-</option>
Â  Â  Â  Â  Â  Â  <option value="AB-">AB-</option><option value="O-">O-</option>
Â  Â  Â  Â  </select></div>
Â  Â  <div><label for="collectionDate">Collection Date</label>
Â  Â  Â  Â  <input type="date" id="collectionDate" required></div>
Â  Â  <div><label for="volume">Volume (mL)</label>
Â  Â  Â  Â  <input type="number" id="volume" min="100" max="500" value="350" required></div>
Â  Â  <div><label for="remarks">Remarks</label>
Â  Â  Â  Â  <input type="text" id="remarks" placeholder="Optional notes"></div>
Â  Â  <button type="submit">Add Bag</button>
</form>
<button id="exportButton" onclick="exportToCSV()">Export to Excel (CSV)</button>
<table id="screenMatrixTable">
Â  Â  <thead>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">A+</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">B+</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">O+</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left matrix-thick-right">AB+</th>
Â  Â  Â  Â  </tr>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-right">Vol.</th>
Â  Â  Â  Â  </tr>
Â  Â  </thead>
Â  Â  <tbody id="screenMatrixBodyPos"></tbody>
Â  Â  <thead>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">A-</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">B-</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left">O-</th>
Â  Â  Â  Â  Â  Â  <th colspan="4" class="group-header matrix-thick-left matrix-thick-right">AB-</th>
Â  Â  Â  Â  </tr>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Vol.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-left">Bag No.</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Collection</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header">Expiry</th>
Â  Â  Â  Â  Â  Â  <th class="sub-header matrix-thick-right">Vol.</th>
Â  Â  Â  Â  </tr>
Â  Â  </thead>
Â  Â  <tbody id="screenMatrixBodyNeg"></tbody>
</table>
<table id="ledgerTable"><thead>
Â  Â  <tr><th>Bag Number</th><th>Group</th><th>Volume (mL)</th><th>Collection Date</th><th>Expiry Date (42 Days)</th><th>Remarks</th><th>Action</th></tr>
</thead><tbody id="ledgerBody"></tbody></table>
<script>
let bloodStock = [], nextId = 1;
function saveLedger(){localStorage.setItem('bloodLedgerData', JSON.stringify(bloodStock));}
function loadLedger(){
Â  Â  const savedData = localStorage.getItem('bloodLedgerData');
Â  Â  try {
Â  Â  Â  Â  bloodStock = savedData ? JSON.parse(savedData) : [];
Â  Â  Â  Â  if (!Array.isArray(bloodStock)) bloodStock = [];
Â  Â  } catch (e) {
Â  Â  Â  Â  bloodStock = [];
Â  Â  }
Â  Â  const maxId = bloodStock.reduce((m,bag)=>Math.max(m,bag.id||0),0);
Â  Â  nextId = maxId+1;
}
function calculateExpiryDate(dateString){
Â  Â  const d=new Date(dateString);d.setDate(d.getDate()+42);
Â  Â  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
}
function ddmmyy(dateString){
Â  Â  if(!dateString)return'';let[d1,d2,d3]=dateString.split('-');
Â  Â  if(d1.length==4)return`${d3}-${d2}-${d1.slice(-2)}`;
Â  Â  return dateString;
}
function isExpired(expiry){
Â  Â  const t=new Date(),e=new Date(expiry);e.setHours(23,59,59,999);return t>e;
}
function exportToCSV(){
Â  Â  if(bloodStock.length===0){alert("The ledger is empty. Nothing to export.");return;}
Â  Â  const headers = ["Bag Number", "Group", "Volume (mL)", "Collection Date", "Expiry Date", "Remarks"].join(',')+'\n';
Â  Â  const csvRows = bloodStock.map(bag=>[bag.bagNumber, bag.group, bag.volume,
Â  Â  Â  Â  ddmmyy(bag.collectionDate),ddmmyy(bag.expiryDate), bag.remarks?`"${bag.remarks.replace(/"/g,'""').replace(/\n/g,' ')}"`:''].join(',')).join('\n');
Â  Â  const c = headers+csvRows;const u=encodeURI("data:text/csv;charset=utf-8,"+c);
Â  Â  const link=document.createElement("a");link.setAttribute("href",u);
Â  Â  link.setAttribute("download",`Blood_Stock_Ledger_${new Date().toISOString().slice(0,10)}.csv`);
Â  Â  document.body.appendChild(link);link.click();document.body.removeChild(link);alert("Export complete! Check your downloads folder.");
}
function addBag(fullBagNum,group,colDate,volume,remarks){
Â  Â  if(!Array.isArray(bloodStock)) bloodStock = [];
Â  Â  if(bloodStock.length>=80){alert("Stock limit of 80 bags reached. Please remove an expired or used bag before adding a new one.");return;}
Â  Â  if(bloodStock.some(b=>b.bagNumber===fullBagNum)){alert(`Bag number ${fullBagNum} already exists in the ledger!`);return;}
Â  Â  const expiry = calculateExpiryDate(colDate);
Â  Â  const newBag={id:nextId++,bagNumber:fullBagNum,group:group,collectionDate:colDate,expiryDate:expiry,volume:volume,remarks:remarks||''};
Â  Â  bloodStock.push(newBag);saveLedger();renderLedger();renderScreenMatrixTable();
}
function deleteBag(id){
Â  Â  if(!Array.isArray(bloodStock)) bloodStock = [];
Â  Â  const il=bloodStock.length;
Â  Â  bloodStock=bloodStock.filter(b=>b.id!==id);
Â  Â  if(bloodStock.length<il){saveLedger();renderLedger();renderScreenMatrixTable();}
}
function renderLedger(){
Â  Â  const ledgerBody=document.getElementById('ledgerBody');ledgerBody.innerHTML='';
Â  Â  const counts = {'A+':0,'B+':0,'AB+':0,'O+':0,'A-':0,'B-':0,'AB-':0,'O-':0};
Â  Â  let totalBags=0;
Â  Â  bloodStock.sort((a,b)=>a.group<b.group?-1:a.group>b.group?1:new Date(a.collectionDate)-new Date(b.collectionDate));
Â  Â  bloodStock.forEach(bag=>{
Â  Â  Â  Â  if(counts.hasOwnProperty(bag.group)){counts[bag.group]++; totalBags++;}
Â  Â  Â  Â  const row=ledgerBody.insertRow();
Â  Â  Â  Â  let rem=bag.remarks;if(isExpired(bag.expiryDate)){row.classList.add('expired');if(!bag.remarks)rem='EXPIRED';}
Â  Â  Â  Â  row.insertCell().textContent=bag.bagNumber;
Â  Â  Â  Â  row.insertCell().textContent=bag.group;
Â  Â  Â  Â  row.insertCell().textContent=bag.volume;
Â  Â  Â  Â  row.insertCell().textContent=ddmmyy(bag.collectionDate);
Â  Â  Â  Â  row.insertCell().textContent=ddmmyy(bag.expiryDate);
Â  Â  Â  Â  row.insertCell().textContent=rem;
Â  Â  Â  Â  const ac=row.insertCell();const db=document.createElement('button');
Â  Â  Â  Â  db.textContent='Remove';db.classList.add('delete-btn');db.onclick=()=>deleteBag(bag.id);ac.appendChild(db);
Â  Â  });
Â  Â  document.getElementById('totalBagsCount').textContent=totalBags;
Â  Â  document.getElementById('countA_pos').textContent=counts['A+'];
Â  Â  document.getElementById('countB_pos').textContent=counts['B+'];
Â  Â  document.getElementById('countAB_pos').textContent=counts['AB+'];
Â  Â  document.getElementById('countO_pos').textContent=counts['O+'];
Â  Â  document.getElementById('countA_neg').textContent=counts['A-'];
Â  Â  document.getElementById('countB_neg').textContent=counts['B-'];
Â  Â  document.getElementById('countAB_neg').textContent=counts['AB-'];
Â  Â  document.getElementById('countO_neg').textContent=counts['O-'];
}
function renderScreenMatrixTable(){
Â  Â  const pos = ["A+","B+","O+","AB+"], neg = ["A-","B-","O-","AB-"];
Â  Â  let byPos={},byNeg={};pos.forEach(g=>byPos[g]=[]);neg.forEach(g=>byNeg[g]=[]);
Â  Â  bloodStock.forEach(b=>{
Â  Â  Â  Â  if(byPos[b.group])byPos[b.group].push(b);
Â  Â  Â  Â  if(byNeg[b.group])byNeg[b.group].push(b);
Â  Â  });
Â  Â  for(let g of pos)byPos[g].sort((a,b)=>new Date(a.collectionDate)-new Date(b.collectionDate));
Â  Â  for(let g of neg)byNeg[g].sort((a,b)=>new Date(a.collectionDate)-new Date(b.collectionDate));
Â  Â  const pmax=Math.max(...pos.map(g=>byPos[g].length)), nmax=Math.max(...neg.map(g=>byNeg[g].length));
Â  Â  const mbp=document.getElementById('screenMatrixBodyPos'),mbn=document.getElementById('screenMatrixBodyNeg');mbp.innerHTML='';mbn.innerHTML='';
Â  Â  for(let i=0;i<pmax;++i){
Â  Â  Â  Â  const row=document.createElement('tr');
Â  Â  Â  Â  for(let ki=0;ki<pos.length;++ki){
Â  Â  Â  Â  Â  Â  const g=pos[ki]; const b=byPos[g][i];
Â  Â  Â  Â  Â  Â  for(let k=0;k<4;++k){
Â  Â  Â  Â  Â  Â  Â  Â  let td=document.createElement('td');
Â  Â  Â  Â  Â  Â  Â  Â  if(k===0)td.className+='matrix-thick-left ';
Â  Â  Â  Â  Â  Â  Â  Â  if(ki===pos.length-1 && k===3)td.className+='matrix-thick-right ';
Â  Â  Â  Â  Â  Â  Â  Â  if(b){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(k==0){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.textContent=b.bagNumber;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.textContent="Remove";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.className="remove-btn-matrix";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.onclick=()=>deleteBag(b.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.appendChild(btn);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==1)td.textContent=ddmmyy(b.collectionDate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==2)td.textContent=ddmmyy(b.expiryDate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==3)td.textContent=b.volume;
Â  Â  Â  Â  Â  Â  Â  Â  }else{td.textContent='';}
Â  Â  Â  Â  Â  Â  Â  Â  row.appendChild(td);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  mbp.appendChild(row);
Â  Â  }
Â  Â  for(let i=0;i<nmax;++i){
Â  Â  Â  Â  const row=document.createElement('tr');
Â  Â  Â  Â  for(let ki=0;ki<neg.length;++ki){
Â  Â  Â  Â  Â  Â  const g=neg[ki]; const b=byNeg[g][i];
Â  Â  Â  Â  Â  Â  for(let k=0;k<4;++k){
Â  Â  Â  Â  Â  Â  Â  Â  let td=document.createElement('td');
Â  Â  Â  Â  Â  Â  Â  Â  if(k===0)td.className+='matrix-thick-left ';
Â  Â  Â  Â  Â  Â  Â  Â  if(ki===neg.length-1 && k===3)td.className+='matrix-thick-right ';
Â  Â  Â  Â  Â  Â  Â  Â  if(b){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(k==0){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.textContent=b.bagNumber;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.textContent="Remove";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.className="remove-btn-matrix";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.onclick=()=>deleteBag(b.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.appendChild(btn);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==1)td.textContent=ddmmyy(b.collectionDate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==2)td.textContent=ddmmyy(b.expiryDate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(k==3)td.textContent=b.volume;
Â  Â  Â  Â  Â  Â  Â  Â  }else{td.textContent='';}
Â  Â  Â  Â  Â  Â  Â  Â  row.appendChild(td);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  mbn.appendChild(row);
Â  Â  }
}
window.onbeforeprint=()=>{
Â  Â  renderScreenMatrixTable();
Â  Â  document.getElementById("printDateStock").style.display="block";
};
document.addEventListener('DOMContentLoaded',()=>{
Â  Â  const today=new Date(),fd=today.toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});
Â  Â  document.getElementById('printDateStock').textContent=`Stock Date: ${fd}`;
Â  Â  const dateInput=document.getElementById('collectionDate'),yyyy=today.getFullYear(),mm=String(today.getMonth()+1).padStart(2,'0'),dd=String(today.getDate()).padStart(2,'0');dateInput.value=`${yyyy}-${mm}-${dd}`;
Â  Â  document.getElementById('addBagForm').addEventListener('submit',function(event){
Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  const prefix=document.getElementById('bagPrefix').value,number=document.getElementById('bagNumber').value.trim(),fullBagNum=prefix+number,group=document.getElementById('bloodGroup').value,colDate=document.getElementById('collectionDate').value,volume=parseInt(document.getElementById('volume').value,10),remarks=document.getElementById('remarks').value.trim();
Â  Â  Â  Â  if(number===""){alert("Please enter a Bag Number.");return;}
Â  Â  Â  Â  addBag(fullBagNum,group,colDate,volume,remarks);
Â  Â  Â  Â  document.getElementById('bagNumber').value='';
Â  Â  Â  Â  document.getElementById('remarks').value='';
Â  Â  Â  Â  document.getElementById('bagNumber').focus();
Â  Â  });
Â  Â  loadLedger();renderLedger();renderScreenMatrixTable();
});
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script>
    // --- START FIREBASE INITIALIZATION ---
    // PASTE YOUR firebaseConfig OBJECT FROM STEP 1 HERE
    const firebaseConfig = {
      apiKey: "AIzaSyB1jO0PS1MPpEDbBdcBgceI7V8z2SzkcDs",
  authDomain: "daily-blood--stock.firebaseapp.com",
  projectId: "daily-blood--stock",
  storageBucket: "daily-blood--stock.firebasestorage.app",
  messagingSenderId: "616941891913",
  appId: "1:616941891913:web:4911708ead04c372c92a98",
  measurementId: "G-VPYZPC6B41 
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(); // This 'db' is now your database
    // --- END FIREBASE INITIALIZATION ---
    </script>

    <script>
    let bloodStock = [], nextId = 1; // We will change this
    // ... all your existing JS code
    </script>
</body>
</html>
</script>
</body>
</html>
